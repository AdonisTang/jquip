$.plug(function(a){function f(b,f){var g=a.$$(f)[0],h=b.split("."),i=h.shift(),j=i.indexOf("["),k,l,m,n=i.charAt(0);if(n=="#")return c(i.substring(1),g);j>=0&&(m=i.substring(j+1,i.length-1).split("="),k=m[0],l=m.length==2&&m[1],l&&l.charAt(0)=="'"&&(l=l.substring(1,l.length-1)),i=i.substring(0,j));var o=i.split("#");if(o.length==2){g=c(o[1],g);if(!g)return[];if(!a.eqSI(g.tagName,o[0]))return[];if(h.length==1)return[g]}var p=i?d(i,g):e(h.shift(),g);if(!h.length&&!k)return p;var q=[];for(var r=0,s=p.length;r<s;r++){var t=p[r],u=h.length,v=!0;if(h.length)while(u--)a.hasClass([t],h[u])||(v=!1);v&&(!k||!l||t[k]==l)&&q.push(t)}return q}var b=document,c=function(a,c){return(c||b).getElementById(a)},d=function(a,c){return(c||b).getElementsByTagName(a)},e=b.getElementsByClassName?function(a,c){return(c||b).getElementsByClassName(a)}:function(c,d){var e=a.walk(function(a){return a.className&&a.className.indexOf(c)>=0},d||b);return a.unique(e)};a.setQuery(function(a,c){if(b.querySelectorAll)return(c||b).querySelectorAll(a);var d,e=[[c||b]],g=a.split(" "),h=[];for(var i=0,j=g.length;i<j;i++){var k=e[i];if(k.length==0)return h;var l=g[i],m=[];for(var n=0,o=k.length;n<o;n++){d=f(l,k[n]);for(var p=0,q=d.length;p<q;p++)m.push(d[p])}e.push(m)}return e.length>1?e.pop():[]})})